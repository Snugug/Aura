//////////////////////////////
// Aura Setup Mixin
//////////////////////////////
@mixin aura-setup {
  // Calculate HTML font size in Em
  $body-font-size-em: base-font-size();
  
  // Set Root Em
  html {
    // If Font Scale is enabled, set up root font scaling
    @if $font-scale {
      // Set base Root Font to -2 Modular Scale
      font-size: ms(-2, $body-font-size-em, $responsive-ratio);
      
      // At Small Responsive Scale, increase Modular Scale by 1
      @include respond-to('small') {
        font-size: ms(-1, $body-font-size-em, $responsive-ratio);
      }
      
      // At Large Responsive Scale, increase Modular Scale by 2 to base
      @include respond-to('large') {
        font-size: ms(0, $body-font-size-em, $responsive-ratio);
      }
    }
    // If Font Scale is disabled, set root font to base font size
    @else {
      font-size: $body-font-size-em;
    }
  }
  // Define Grid Dimensions
  @include measure-to-grid;
  
  // Create Measure class to be extended
  .measure {
    @include columns($main-content-cols);
  }
}

//////////////////////////////
// Aura Grid Generation
//////////////////////////////
@mixin measure-to-grid {
  $col-total: $measure-width / $main-content-cols * 1em;
  $gutter-col-total: nth($gutter-to-col, 1) + nth($gutter-to-col, 2);
  $gutter-col-grid: $col-total / $gutter-col-total;
  
  // Set up Susy variables based on Measure
  $col-width: $gutter-col-grid * nth($gutter-to-col, 2);
  $gutter-width: $gutter-col-grid * nth($gutter-to-col, 1);
  $side-gutter-width: $gutter-width;
  
  $measure: columns-width(9);
}

//////////////////////////////
// Aurora Respond-To
//////////////////////////////
@mixin respond-to($context) {
  $breakpoints: '' !default;
  @if $font-scale {
    $breakpoints: responsive-scale();
  }
  @else {
    $breakpoints: responsive-ratio();
  }
  $i: 1 !default;
  @each $size in $sizes {
    @if $context == $size {
      $respond: nth($breakpoints, $i);
      @media screen and (min-width: $respond) {
        @content;
      }
    }
    $i: $i + 1;
  }
}
